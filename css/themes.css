/* Theme System for Piogino Meetup App - COMPLETE VERSION */

/* Theme Transition Class */
.theme-transition,
.theme-transition *,
.theme-transition *:before,
.theme-transition *:after {
    transition: 
        background-color 0.3s ease,
        color 0.3s ease,
        border-color 0.3s ease,
        box-shadow 0.3s ease,
        backdrop-filter 0.3s ease !important;
}

/* REMOVED: Automatic dark theme media query to prevent conflicts */
/* The theme switcher JavaScript will handle system preference detection */

/* Light Theme (explicit) - DEFAULT */
:root,
[data-theme="light"],
.theme-light {
    --primary-color: #6366f1;
    --primary-hover: #5b5bf6;
    --secondary-color: #6b7280;
    --secondary-hover: #5b6270;
    --success-color: #10b981;
    --success-hover: #059669;
    --accent-color: #8b5cf6;
    --accent-hover: #7c3aed;
    --warning-color: #f59e0b;
    --error-color: #ef4444;
    
    --bg-primary: #ffffff;
    --bg-secondary: #f9fafb;
    --bg-tertiary: #f3f4f6;
    
    --text-primary: #111827;
    --text-secondary: #6b7280;
    --text-tertiary: #9ca3af;
    
    --border-color: #d1d5db;
    --border-focus: var(--primary-color);
}

[data-theme="light"] body,
.theme-light body {
    background: linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%);
}

/* Dark Theme (explicit) */
[data-theme="dark"],
.theme-dark {
    --primary-color: #818cf8;
    --primary-hover: #6366f1;
    --secondary-color: #9ca3af;
    --secondary-hover: #6b7280;
    --success-color: #34d399;
    --success-hover: #10b981;
    --accent-color: #a78bfa;
    --accent-hover: #8b5cf6;
    --warning-color: #fbbf24;
    --error-color: #f87171;
    
    --bg-primary: #1f2937;
    --bg-secondary: #374151;
    --bg-tertiary: #4b5563;
    
    --text-primary: #f9fafb;
    --text-secondary: #d1d5db;
    --text-tertiary: #9ca3af;
    
    --border-color: #4b5563;
    --border-focus: var(--primary-color);
}

[data-theme="dark"] body,
.theme-dark body {
    background: linear-gradient(135deg, #1f2937 0%, #111827 100%);
}

[data-theme="dark"] .success-icon,
.theme-dark .success-icon {
    background: rgba(52, 211, 153, 0.2);
}

[data-theme="dark"] .participant-selection,
.theme-dark .participant-selection {
    background: rgba(129, 140, 248, 0.2);
    border-color: rgba(129, 140, 248, 0.3);
}

[data-theme="dark"] .proposal-card.today,
.theme-dark .proposal-card.today {
    background: rgba(129, 140, 248, 0.1);
    border-color: var(--primary-color);
}

[data-theme="dark"] .status-available,
.theme-dark .status-available {
    background: rgba(52, 211, 153, 0.2);
    color: #6ee7b7;
    border-color: rgba(52, 211, 153, 0.3);
}

[data-theme="dark"] .status-maybe,
.theme-dark .status-maybe {
    background: rgba(251, 191, 36, 0.2);
    color: #fde047;
    border-color: rgba(251, 191, 36, 0.3);
}

[data-theme="dark"] .status-unavailable,
.theme-dark .status-unavailable {
    background: rgba(248, 113, 113, 0.2);
    color: #fca5a5;
    border-color: rgba(248, 113, 113, 0.3);
}

/* Sepia Theme */
[data-theme="sepia"],
.theme-sepia {
    --primary-color: #8b4513;
    --primary-hover: #a0522d;
    --secondary-color: #696969;
    --secondary-hover: #556b2f;
    --success-color: #556b2f;
    --success-hover: #228b22;
    --accent-color: #cd853f;
    --accent-hover: #daa520;
    --warning-color: #daa520;
    --error-color: #b22222;
    
    --bg-primary: #fdf6e3;
    --bg-secondary: #f5e6d3;
    --bg-tertiary: #e6d5c0;
    
    --text-primary: #2f1b14;
    --text-secondary: #5d4e37;
    --text-tertiary: #8b7355;
    
    --border-color: #d2b48c;
    --border-focus: var(--primary-color);
}

[data-theme="sepia"] body,
.theme-sepia body {
    background: linear-gradient(135deg, #fdf6e3 0%, #f5e6d3 100%);
}

[data-theme="sepia"] .success-icon,
.theme-sepia .success-icon {
    background: rgba(85, 107, 47, 0.2);
}

[data-theme="sepia"] .participant-selection,
.theme-sepia .participant-selection {
    background: rgba(139, 69, 19, 0.1);
    border-color: rgba(139, 69, 19, 0.3);
}

[data-theme="sepia"] .proposal-card.today,
.theme-sepia .proposal-card.today {
    background: rgba(139, 69, 19, 0.05);
    border-color: var(--primary-color);
}

[data-theme="sepia"] .status-available,
.theme-sepia .status-available {
    background: rgba(85, 107, 47, 0.15);
    color: #556b2f;
    border-color: rgba(85, 107, 47, 0.3);
}

[data-theme="sepia"] .status-maybe,
.theme-sepia .status-maybe {
    background: rgba(218, 165, 32, 0.15);
    color: #b8860b;
    border-color: rgba(218, 165, 32, 0.3);
}

[data-theme="sepia"] .status-unavailable,
.theme-sepia .status-unavailable {
    background: rgba(178, 34, 34, 0.15);
    color: #8b0000;
    border-color: rgba(178, 34, 34, 0.3);
}

/* Theme Switcher Specific Styles */
#themeSwitcher {
    user-select: none;
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
}

#themeSwitcher button {
    user-select: none;
    border: none;
    outline: none;
    cursor: pointer;
}

#themeSwitcher button:focus-visible {
    outline: 2px solid var(--primary-color);
    outline-offset: 2px;
}

/* Smooth transitions for all themed elements */
body,
.card-enhanced,
.section-card,
.proposal-card,
.btn-primary,
.btn-secondary,
.btn-success,
.btn-accent,
.input-primary,
.notification,
#themeSwitcher {
    transition: 
        background-color 0.3s ease,
        color 0.3s ease,
        border-color 0.3s ease,
        box-shadow 0.3s ease;
}

/* Calendar theme adjustments */
[data-theme="dark"] .calendar-day,
.theme-dark .calendar-day {
    border-color: #4b5563;
}

[data-theme="dark"] .calendar-day.neutral,
.theme-dark .calendar-day.neutral {
    background-color: #374151;
    color: #9ca3af;
    border-color: #4b5563;
}

[data-theme="dark"] .calendar-day.other-month,
.theme-dark .calendar-day.other-month {
    background-color: #1f2937;
    color: #6b7280;
}

[data-theme="sepia"] .calendar-day,
.theme-sepia .calendar-day {
    border-color: #d2b48c;
}

[data-theme="sepia"] .calendar-day.neutral,
.theme-sepia .calendar-day.neutral {
    background-color: #e6d5c0;
    color: #8b7355;
    border-color: #d2b48c;
}

[data-theme="sepia"] .calendar-day.other-month,
.theme-sepia .calendar-day.other-month {
    background-color: #f5e6d3;
    color: #a0956b;
}

/* Emote suggestions theme support */
[data-theme="dark"] #emote-suggestions,
.theme-dark #emote-suggestions {
    background: #1f2937;
    border-color: #374151;
    color: #f9fafb;
}

[data-theme="dark"] #emote-suggestions::before,
.theme-dark #emote-suggestions::before {
    background: #111827;
    color: #9ca3af;
    border-bottom-color: #374151;
}

[data-theme="dark"] .emote-suggestion:hover:not(.bg-indigo-600),
.theme-dark .emote-suggestion:hover:not(.bg-indigo-600) {
    background-color: #374151;
    border-color: #4b5563;
}

[data-theme="dark"] .emote-suggestion span,
.theme-dark .emote-suggestion span {
    color: #f9fafb;
}

[data-theme="dark"] .emote-suggestion.bg-indigo-600,
.theme-dark .emote-suggestion.bg-indigo-600 {
    background-color: #4f46e5 !important;
    border-color: #6366f1 !important;
}

[data-theme="sepia"] #emote-suggestions,
.theme-sepia #emote-suggestions {
    background: #fdf6e3;
    border-color: #d2b48c;
    color: #2f1b14;
}

[data-theme="sepia"] #emote-suggestions::before,
.theme-sepia #emote-suggestions::before {
    background: #f5e6d3;
    color: #8b7355;
    border-bottom-color: #d2b48c;
}

[data-theme="sepia"] .emote-suggestion:hover:not(.bg-indigo-600),
.theme-sepia .emote-suggestion:hover:not(.bg-indigo-600) {
    background-color: #f5e6d3;
    border-color: #d2b48c;
}

[data-theme="sepia"] .emote-suggestion span,
.theme-sepia .emote-suggestion span {
    color: #2f1b14;
}

/* Enhanced button styling for themes */
[data-theme="dark"] .btn-primary,
.theme-dark .btn-primary {
    background: var(--primary-color);
    border-color: var(--primary-color);
}

[data-theme="dark"] .btn-primary:hover,
.theme-dark .btn-primary:hover {
    background: var(--primary-hover);
    border-color: var(--primary-hover);
}

[data-theme="sepia"] .btn-primary,
.theme-sepia .btn-primary {
    background: var(--primary-color);
    border-color: var(--primary-color);
    color: white;
}

[data-theme="sepia"] .btn-primary:hover,
.theme-sepia .btn-primary:hover {
    background: var(--primary-hover);
    border-color: var(--primary-hover);
}

/* Input field theming */
[data-theme="dark"] .input-primary,
.theme-dark .input-primary {
    background: var(--bg-primary);
    border-color: var(--border-color);
    color: var(--text-primary);
}

[data-theme="dark"] .input-primary:focus,
.theme-dark .input-primary:focus {
    border-color: var(--border-focus);
    box-shadow: 0 0 0 3px rgba(129, 140, 248, 0.1);
}

[data-theme="sepia"] .input-primary,
.theme-sepia .input-primary {
    background: var(--bg-primary);
    border-color: var(--border-color);
    color: var(--text-primary);
}

[data-theme="sepia"] .input-primary:focus,
.theme-sepia .input-primary:focus {
    border-color: var(--border-focus);
    box-shadow: 0 0 0 3px rgba(139, 69, 19, 0.1);
}

/* Card theming */
[data-theme="dark"] .card-enhanced,
[data-theme="dark"] .section-card,
[data-theme="dark"] .proposal-card,
.theme-dark .card-enhanced,
.theme-dark .section-card,
.theme-dark .proposal-card {
    background: var(--bg-primary);
    border-color: var(--border-color);
    color: var(--text-primary);
}

[data-theme="sepia"] .card-enhanced,
[data-theme="sepia"] .section-card,
[data-theme="sepia"] .proposal-card,
.theme-sepia .card-enhanced,
.theme-sepia .section-card,
.theme-sepia .proposal-card {
    background: var(--bg-primary);
    border-color: var(--border-color);
    color: var(--text-primary);
}

/* Notification theming */
[data-theme="dark"] .notification,
.theme-dark .notification {
    background: var(--bg-primary);
    border-color: var(--border-color);
    color: var(--text-primary);
}

[data-theme="sepia"] .notification,
.theme-sepia .notification {
    background: var(--bg-primary);
    border-color: var(--border-color);
    color: var(--text-primary);
}

/* Message styling */
[data-theme="dark"] .bg-gray-50,
.theme-dark .bg-gray-50 {
    background-color: var(--bg-secondary) !important;
}

[data-theme="sepia"] .bg-gray-50,
.theme-sepia .bg-gray-50 {
    background-color: var(--bg-secondary) !important;
}

/* Modal theming */
[data-theme="dark"] #dayModal .bg-white,
.theme-dark #dayModal .bg-white {
    background: var(--bg-primary) !important;
    color: var(--text-primary);
}

[data-theme="sepia"] #dayModal .bg-white,
.theme-sepia #dayModal .bg-white {
    background: var(--bg-primary) !important;
    color: var(--text-primary);
}

/* Participant card theming */
[data-theme="dark"] .participant-card,
.theme-dark .participant-card {
    background: var(--bg-primary);
    border-color: var(--border-color);
    color: var(--text-primary);
}

[data-theme="dark"] .participant-card:hover,
.theme-dark .participant-card:hover {
    background: var(--bg-secondary);
}

[data-theme="sepia"] .participant-card,
.theme-sepia .participant-card {
    background: var(--bg-primary);
    border-color: var(--border-color);
    color: var(--text-primary);
}

[data-theme="sepia"] .participant-card:hover,
.theme-sepia .participant-card:hover {
    background: var(--bg-secondary);
}

/* Text color inheritance */
[data-theme="dark"] .text-gray-900,
[data-theme="dark"] .text-gray-800,
[data-theme="dark"] .text-gray-700,
.theme-dark .text-gray-900,
.theme-dark .text-gray-800,
.theme-dark .text-gray-700 {
    color: var(--text-primary) !important;
}

[data-theme="dark"] .text-gray-600,
[data-theme="dark"] .text-gray-500,
.theme-dark .text-gray-600,
.theme-dark .text-gray-500 {
    color: var(--text-secondary) !important;
}

[data-theme="sepia"] .text-gray-900,
[data-theme="sepia"] .text-gray-800,
[data-theme="sepia"] .text-gray-700,
.theme-sepia .text-gray-900,
.theme-sepia .text-gray-800,
.theme-sepia .text-gray-700 {
    color: var(--text-primary) !important;
}

[data-theme="sepia"] .text-gray-600,
[data-theme="sepia"] .text-gray-500,
.theme-sepia .text-gray-600,
.theme-sepia .text-gray-500 {
    color: var(--text-secondary) !important;
}

/* Border color overrides */
[data-theme="dark"] .border-gray-200,
[data-theme="dark"] .border-gray-300,
.theme-dark .border-gray-200,
.theme-dark .border-gray-300 {
    border-color: var(--border-color) !important;
}

[data-theme="sepia"] .border-gray-200,
[data-theme="sepia"] .border-gray-300,
.theme-sepia .border-gray-200,
.theme-sepia .border-gray-300 {
    border-color: var(--border-color) !important;
}

/* Loading spinner theming */
[data-theme="dark"] .loading-spinner,
.theme-dark .loading-spinner {
    border-color: rgba(255, 255, 255, 0.3);
    border-top-color: white;
}

[data-theme="sepia"] .loading-spinner,
.theme-sepia .loading-spinner {
    border-color: rgba(47, 27, 20, 0.3);
    border-top-color: var(--text-primary);
}

/* Accessibility: Respect Reduced Motion */
@media (prefers-reduced-motion: reduce) {
    .theme-transition,
    .theme-transition *,
    .theme-transition *:before,
    .theme-transition *:after {
        transition: none !important;
    }
    
    #themeSwitcher {
        transition: none !important;
    }
}

/* High Contrast Mode Support */
@media (prefers-contrast: high) {
    :root {
        --border-color: #000000;
        --text-secondary: #000000;
        --bg-secondary: #ffffff;
        --bg-tertiary: #f0f0f0;
    }
    
    .btn-primary,
    .btn-secondary,
    .btn-success,
    .btn-accent {
        border: 2px solid #000000;
    }
    
    .input-primary {
        border: 2px solid #000000;
    }
    
    .card-enhanced,
    .section-card,
    .proposal-card {
        border: 2px solid #000000;
    }
}

/* Print Styles */
@media print {
    #themeSwitcher {
        display: none !important;
    }
    
    /* Force light theme for printing */
    * {
        background: white !important;
        color: black !important;
        border-color: black !important;
    }
}

/* Mobile adjustments for theme switcher */
@media (max-width: 640px) {
    #themeSwitcher {
        top: 0.75rem;
        left: 0.75rem;
        padding: 0.5rem;
    }
    
    #themeButton {
        padding: 0.5rem !important;
        gap: 0.25rem !important;
    }
    
    #themeIcon {
        font-size: 1rem;
    }
}

/* Hide theme label on very small screens */
@media (max-width: 480px) {
    #themeLabel {
        display: none !important;
    }
}

/* Ensure proper contrast in all themes */
.btn-primary:focus,
.btn-secondary:focus,
.btn-success:focus,
.btn-accent:focus {
    outline: 2px solid var(--text-primary);
    outline-offset: 2px;
}

.input-primary:focus {
    outline: 2px solid var(--primary-color);
    outline-offset: 2px;
}